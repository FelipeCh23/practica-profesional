# ğŸ› ï¸ Tareas del Proyecto â€“ Algoritmo de galerÃ­as

## ğŸš§ DepuraciÃ³n
- [x] ğŸŸ© (Drilling Design) Solucionar error de visualizaciÃ³n de la grilla
- [x] ğŸ›ï¸ (Drilling Design) Evitar restablecer la selecciÃ³n del combobox de geometrÃ­a tras insertar una galerÃ­a
- [x] ğŸ§± (Drilling Design) Corregir colocaciÃ³n de perforaciones de **cajas** cerca del encuentro pared/techo (evitar amontonamiento)
- [x] ğŸ› ï¸ (Drilling Design) Corregir colocaciÃ³n de perforaciones de **corona** cuando el arco es muy curvo
- [ ] ğŸ§ª (Layout) Usar `wall_top_y` y `wall_x_left/right` para delimitar claramente paredes vs. techo en `place_cajas`

## ğŸ¨ Interfaz GrÃ¡fica
- [x] ğŸ§­ Agregar una **grilla** al lienzo (tamaÃ±o en m, lÃ­neas mayores, ejes)
- [x] ğŸ–±ï¸ Habilitar **paneo** del lienzo (arrastrar con botÃ³n central/Shift+drag)
- [ ] ğŸ” Agregar **zoom** (Ctrl+rueda o botones +/âˆ’)
- [ ] ğŸ¨ Unificar color minerÃ­a para perforaciones cargadas y vacÃ­as + selector de color
- [ ]    Agregar ventanas de pasos en la parte de arriba de la interfaz.

## ğŸ§© GeometrÃ­a & EdiciÃ³n
- [x] ğŸ§² Bloquear la **inserciÃ³n de nuevas galerÃ­as** por error (toggle `lock_geom_insert`)
- [x] ğŸ¯ EdiciÃ³n de **arco** (D-shaped/Horseshoe) con manillas C/R
- [x] â• Insertar **puntos libres** sobre el arco y arrastrarlos
- [ ] ğŸ§µ Suavizado del arco al mover puntos (re-muestreo/reparametrizaciÃ³n para â€œcurva tipo cuerdaâ€)
- [ ] ğŸ§· Hit-test para **ignorar clics encima** de la galerÃ­a cuando `lock_geom_insert` estÃ¡ activado (sin mostrar error)
- [ ] ğŸ§° Bezier: habilitar ediciÃ³n con manillas p0..p3 (similar a C/R)
- [ ] Suavizado del arco al mover puntos (re-muestreo).
- [ ]  Bezier editable con manillas p0â€“p3.

## CÃ³digo / OrganizaciÃ³n
- [ ]âœ¨ PEP 8 (docstrings, lÃ­neas â‰¤79, verbos en imperativo).
- [ ] Extraer utilidades UI a ui_helpers.py (p. ej., _vbind, helpers de tabs) y mantener drilling_design.py mÃ¡s limpio.
## ğŸ”„ Flujo de trabajo
- [x] ğŸ§­ Reordenar pasos: **eje** â†’ **diseÃ±o de galerÃ­a** â†’ **cuele** â†’ **contracuele** â†’ **zapateras/cajas/corona** â†’ **auxiliares**
- [x] ğŸŸ¨ Mantener **estado del combobox** en el paso de GeometrÃ­a (no resetear a â€œSemicircularâ€)

## ğŸ“¤ ExportaciÃ³n / Compatibilidad
- [x] ğŸ“¦ `export_json()`: exportar `{"holes": ..., "drifts": ...}` (reemplazar `tunnels`)
- [ ] ğŸ§¼ `clear_all()`: limpiar `drift_poly` y `scene.drifts` (eliminar referencias a `tunnel_poly/tunnels`)
- [ ] ğŸ” AÃ±adir importaciÃ³n simple desde `layout_export.json` (opcional)

## ğŸ“‘ DocumentaciÃ³n
- [ ] âœï¸ Documentar ediciÃ³n de arco (C/R) y ediciÃ³n libre con puntos, con capturas
- [ ] ğŸ“˜ Explicar el toggle **lock** y cÃ³mo crear mÃºltiples galerÃ­as sin solaparlas

## âœ… Testing
- [ ] ğŸ§ª Tests de `place_cajas/place_corona` en lÃ­mites de pared/techo
- [ ] ğŸ§ª Tests de geometrÃ­as: rectangular/semicircular/d-shaped/horseshoe/bezier (rangos y cerramiento)
